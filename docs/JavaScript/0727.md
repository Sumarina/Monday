# js 的事件循环是个怎样的过程

在回答这个问题前，先大概的了解下关于浏览器进程的事。
**浏览器是一个多进程。**

1. Browser 进程:浏览器的主进程，负责浏览器界面显示、和用户交互、各个 tab 页的管理、创建和销毁进程以及网络资源管理下载等。
1. GPU 进程:用于 3D 绘制，最多一个。
1. 插件进程:浏览器的每一个插件分别对应一个进程，只有当使用插件的时候才会创建插件进程。
1. 浏览器的渲染进程(浏览器的内核):负责页面的渲染、执行 js、**事件处理**等。(每打开一个 tab 页，则会创建一个渲染进程，但是，有时候浏览器有自己的优化机制，可能会将多个 tab 页合并成一个进程。)

浏览器的进程各司其职，我们前端渲染页面用到的就是**渲染进程**。

**渲染进程是多线程的。**

1. GUI 渲染线程:解析 html 和 css，构建 DOM 树、CSSOM 树，合并成 render 树，最终完成布局绘制等。回流和重绘也会引起该线程的执行。
1. JS 引擎线程:负责解析处理 js 脚本并执行。
1. 事件触发线程:将符合触发条件的事件添加到事件队列的队尾，等待 js 空闲后执行。
1. 定时触发器线程:处理 setTimeout 等。
1. 异步 http 线程:异步请求检测到状态变更，该线程则会产生状态变更事件，并将事件添加到事件队列的队尾，等待执行。

**特别注意：GUI 线程和 JS 线程是互斥的，是有你没我有我没你的一种状态。所以任何一方执行时间过长都会造成对面那一方的堵塞，导致页面渲染时间过长或者直接不出来的问题。**

未完待续。。。
